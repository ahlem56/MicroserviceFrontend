<div class="create-container">
  <div class="event-card">
    <div class="card-header">
      <div class="header-icon" aria-hidden="true">
        <svg viewBox="0 0 24 24" role="presentation" focusable="false">
          <path
            d="M7 2a1 1 0 0 1 2 0v1h6V2a1 1 0 1 1 2 0v1h1.25A2.75 2.75 0 0 1 21 5.75v12.5A2.75 2.75 0 0 1 18.25 21H5.75A2.75 2.75 0 0 1 3 18.25V5.75A2.75 2.75 0 0 1 5.75 3H7V2Zm11 6H6a1 1 0 0 0-1 1v9.25c0 .414.336.75.75.75h12.5a.75.75 0 0 0 .75-.75V9a1 1 0 0 0-1-1Zm-8.5 3.25c.414 0 .75.336.75.75v4.5a.75.75 0 0 1-1.5 0v-4.5c0-.414.336-.75.75-.75Zm4.5 0c.414 0 .75.336.75.75v4.5a.75.75 0 0 1-1.5 0v-4.5c0-.414.336-.75.75-.75ZM18.25 4.5H17V6a1 1 0 1 1-2 0V4.5H9V6a1 1 0 1 1-2 0V4.5H5.75a.25.25 0 0 0-.25.25V7h13V4.75a.25.25 0 0 0-.25-.25Z"
          />
        </svg>
      </div>
      <div class="header-copy">
        <p class="eyebrow"> Events</p>
        <h2>Create a new event</h2>
        <p class="subtitle">
          Craft a compelling experience for your community. Fill in the essentials below to publish or schedule your event.
        </p>
      </div>
    </div>

    <form [formGroup]="eventForm" (ngSubmit)="onSubmit()" novalidate>
      <div class="card-body">
        <div class="form-grid">
          <!-- Title -->
          <div class="form-group">
            <label for="title">Title <span class="required">*</span></label>
            <input
              id="title"
              type="text"
              formControlName="title"
              class="control"
              maxlength="200"
              placeholder="Give your event a standout name"
            />
            <p *ngIf="submitted && f['title'].errors?.['required']" class="error">Title is required.</p>
            <p *ngIf="submitted && f['title'].errors?.['maxlength']" class="error">Maximum 200 characters.</p>
          </div>

          <!-- Location -->
          <div class="form-group">
            <label for="location">Location <span class="required">*</span></label>
            <input
              id="location"
              type="text"
              formControlName="location"
              class="control"
              maxlength="100"
              placeholder="Where is the event taking place?"
            />
            <p *ngIf="submitted && f['location'].errors?.['required']" class="error">Location is required.</p>
            <p *ngIf="submitted && f['location'].errors?.['maxlength']" class="error">Maximum 100 characters.</p>
          </div>

          <!-- Start Date -->
          <div class="form-group">
            <label for="startDate">Start Date <span class="required">*</span></label>
            <input
              id="startDate"
              type="datetime-local"
              formControlName="startDate"
              class="control"
            />
            <p *ngIf="submitted && f['startDate'].errors" class="error">Start date is required.</p>
          </div>

          <!-- End Date -->
          <div class="form-group">
            <label for="endDate">
              End Date
              <span class="optional">Optional</span>
            </label>
            <input
              id="endDate"
              type="datetime-local"
              formControlName="endDate"
              class="control"
            />
            <p class="helper-text">Leave empty to use the start date.</p>
          </div>

          <!-- Description -->
          <div class="form-group span-2">
            <label for="description">Description <span class="required">*</span></label>
            <textarea
              id="description"
              rows="5"
              formControlName="description"
              class="control"
              maxlength="500"
              placeholder="Share the highlights, agenda, or special guests..."
            ></textarea>
            <div class="meta-row">
              <p class="helper-text">Use up to 500 characters to capture attention.</p>
              <p class="helper-text counter">{{ f['description'].value?.length || 0 }}/500</p>
            </div>
            <p *ngIf="submitted && f['description'].errors?.['required']" class="error">Description is required.</p>
            <p *ngIf="submitted && f['description'].errors?.['maxlength']" class="error">Maximum 500 characters.</p>
          </div>

          <!-- Published -->
          <div class="form-group span-2 published-group">
            <span class="group-title">Visibility</span>
            <div class="toggle-row">
              <label class="switch">
                <input type="checkbox" formControlName="published" />
                <span class="slider"></span>
              </label>
              <div class="toggle-copy">
                <span class="toggle-title">Publish immediately</span>
                <span class="toggle-hint">Disable to save this event as a draft and publish later.</span>
              </div>
            </div>
          </div>

          <!-- Photo -->
          <div class="form-group span-2 photo-group">
            <div class="photo-heading">
              <label for="photo">Event cover</label>
              <p class="helper-text">A striking image helps the event stand out across the platform.</p>
            </div>
            <input
              id="photo"
              type="file"
              accept="image/*"
              (change)="onFileChange($event)"
              class="file-input"
            />
            <p class="helper-text">PNG or JPG, up to 5 MB recommended.</p>
            <div *ngIf="photoPreview" class="preview-wrapper">
              <img [src]="photoPreview" alt="Event cover preview" class="preview-img" />
              <button type="button" class="btn-remove" (click)="clearPhoto()">Remove photo</button>
            </div>
          </div>
        </div>

        <div *ngIf="serverError" class="alert alert-error">
          {{ serverError }}
        </div>

        <div class="actions">
          <button type="button" class="btn-secondary" (click)="cancel()">Cancel</button>
          <button type="submit" class="btn-primary" [disabled]="eventForm.invalid">
            Create Event
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
